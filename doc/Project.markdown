# 项目文档

## 目录

[toc]

## 一个交易品网站的用户流程

### 首页

在首页上，主要的功能分为三部分：

1. 导航栏。当用户未登陆时，用户可以通过点击导航栏的相应选项登录；已登录时，导航栏可以导航至用户中心及购物车，并且可以登出。
2. 搜索栏。用户可以在此键入搜索关键词，同时可以对关键词进行筛选和排序的选择。
3. 首页中的推荐图片。用户点击图片时，跳转至艺术品详情页面。

其样例可见下图。

![home-1](pic\home-1.png)

![home-2](pic\home-2.png)

### 登录/注册

登录和注册界面由多个字段组成的输入框构成。某些有特定要求的输入框，在用户输入不符合要求或不正确的信息时，会给予提示。同时，若注册成功，将跳转至登录页；若登录成功，将跳转至主页，主页中搜索栏的状态应为“已登录”的状态（即可以访问用户中心、可以登出，但不再提示登入）。

下为样图。

![register](pic\register.png)

![login](pic\login.png)



### 搜索

除了导航栏外，搜索界面主要为两部分：

1. 搜索栏。用户应能在键入搜索关键词的同时，按指定的条目进行筛选和排序。
2. 搜索结果。各搜索结果在单击时跳转到对应的艺术品详情页。

![search](pic\search.png)

### 查看商品详情

详情页应展示商品的各种信息。

![details](pic\details.png)

#### 评论区

评论区主要分为两个部分：

1. 发表部分。用户可以在输入框中输入评论并发表。同时，允许回复其他人的评论，即“盖楼”。
2. 评论交互部分。用户应可以点赞，以及取消点赞。

![comment](pic\comment.png)

### 购物车

购物查主要分为两个部分：

1. 商品详情部分。商品的基本信息以及售出情况将展示在这一部分。点击商品可以跳转至商品页面；点击删除按钮可以将商品移除。
2. 结算部分。点击结算按钮后，应自动过滤出已售出的商品并对未售出的商品进行总价加和，并在再次确认之后进行扣款检查。

![shopping](pic\shopping.png)

### 发布

发布主要分为三部分：

1. 文件上传部分。要求在上传合理文件的同时，提供合适的预览。
2. 表单部分。对于有特殊要求的字段，在输入不符合要求时，应有相应的提示。
3. 确认部分。点击确认之后可以发布。

![issue](pic\issue.png)

### 个人中心

个人中心应展示所有关于用户的基本信息。

![me](pic\me.png)

## 评分细则

分数占比：必做75+选做50

选做分数最多35

必做+选做分数最多100

**请注意，以上图片来源于去年助教写的PJ，今年要求有所不同，细则以下表为准**

### 必做部分

| 功能点           | 分数 | 具体说明                                                     |
| ---------------- | ---- | ------------------------------------------------------------ |
| 中期+期末检查    | 10   | 期中检查（5）期末面试（5） ~~只要别太离谱就给满~~            |
| 代码结构         | 2    | html, js, css分离，前后端分离，重复代码不宜过多              |
| 导航栏           | 2    | 导航栏始终存在且位置合理（1）导航栏能够正确跳转至各页面（1） |
| 导航栏显示登录   | 2    | 显示登录信息。未登录状态下不应展示购物车、个人中心等页面入口 |
| 杂项信息         | 1    | 浏览器顶部标签页标题非空；主页底部显示自拟的版权信息。       |
| 主页展示         | 3    | 显示最新发布的艺术品（至少5个），并至少显示艺术品图片、名称、作者姓名、价格等信息。有合理的排版 |
| 主页跳转         | 1    | 通过点击艺术品图片或详情按钮或其他合理方式，跳转至相应的详情页面。 |
| 注册             | 4    | 具有<br>用户必填：用户名（**不得与已有用户重复**）、密码、确认密码<br>用户可选：邮箱、电话、地址、性别（下拉框）、出生日期、国籍（下拉框）等输入框，<br>能够正常注册。密码与确认密码不得明文显示。 |
| 注册提示         | 4    | 注册成功或失败时显示相应的提示。注册时出现字段错误应有相关提示（例：密码不为空，邮箱需类似`xx@xx.*`格式，电话需为11位数字等，可在合理范围内自由发挥）（3）<br />注册设置密码时应实时提示密码强弱，密码为弱时可显示判断规则（1） |
| 哈希加盐         | 2    | 数据库中存储用户密码时应用此项技术                           |
| 登录             | 3    | 用户名+密码登录，应有存在用户为空提示、密码为空提示、用户不存在提示、密码错误提示。（3）<br /> |
| 验证码           | 2    | 注册和登陆时需要随机验证码                                   |
| 跳转             | 2    | 注册成功后页面自动跳转至登录页面（1）登录成功后页面自动跳转至主页（1） |
| 页面复用         | 2    | 不允许为每件艺术品单独写一个页面，而应写一个通用的艺术品详情页面，并根据请求参数从数据库中读取相应数据填充至该页面。 |
| 展示商品详情     | 3    | 必须包含艺术品图片、名称、作者姓名、价格、是否已售出、发布日期、发布者用户名、详细参数（指年份、大小、时代、风格等至少4项），布局合理。 |
| 评论区           | 5    | 某用户能对艺术品发表评论，可以删除自己的评论，在别人的评论追加评论（不限制层数），如果自己的评论已删除，不应删除自己评论的追加评论，展示评论区时应有相应展示（如“此评论已删除”） |
| 加入购物车       | 2    | 只有已登录用户可执行加入购物车操作。不允许添加已在当前用户购物车内的艺术品，或“已售出”的艺术品（但可以添加已加入其他用户购物车的商品）。 |
| 购物车购买       | 3    | 点击购买后若账户余额充足，则将购物车中艺术品的状态设置为“已售出”<br/>需检查此艺术品是否已被购买<br />买方账户余额变动，如有卖方，余额也应变动 |
| 展示购物车       | 1    | 展示所有加入当前用户购物车的艺术品的信息，至少需显示艺术品缩略图、名称、价格 |
| 删除购物车       | 1    | 点击删除按钮从购物车中删除某件艺术品                         |
| 搜索             | 3    | 搜索页顶部具有搜索栏，可以根据艺术品名称或作者姓名进行搜索，找到名称或作者中含有相应信息的艺术品。如：使用“按作者搜索”查找“le”，可以找到所有由”example“创作的艺术品，以及所有由”Le Monde“创作的艺术品等等。 |
| 展示搜索结果     | 5    | 需显示搜索到多少件商品。搜索结果需至少显示艺术品图片、名称、作者姓名、价格、简介等信息，并可跳转至相应详情页。无符合条件的搜索结果时需有提示。进入该页面时，或搜索内容为空时，均显示所有艺术品。根据**至少四个字段**进行排序 |
| 搜索结果分页     | 2    | 搜索结果较多时需分页显示，每页至少5个结果；需显示总页数与当前页；需具有翻页/跳转功能，样式不限 |
| 个人信息         | 1    | 个人中心应展示个人信息                                       |
| 充值             | 1    | 充值时通过输入一个文本框并点击“充值”进行。只允许正整数金额，对于不合法输入需有错误提示。点击“充值”后需弹出确认框，确认后直接反映在余额展示中。~~不用真的充钱。~~ |
| 已下单           | 1    | 个人中心中展示我已下单的艺术品                               |
| 已发布           | 2    | 个人中心中展示我已发布的艺术品，包括已售出                   |
| 发布             | 3    | 发布/修改表单应至少包含艺术品名称、作者姓名、简介、年份、流派、尺寸、价格与图片，共八项。图片上传后可以预览 |
| 防止SQL注入（*） | 2    | 填写一些字段时应防止SQL注入                                  |



### 选做部分

| 功能点             | 分数 | 详细说明                                                     |
| ------------------ | ---- | ------------------------------------------------------------ |
| 部署（*）          | 10   | **（此项难度较高，慎选）**部署在服务器或个人电脑上均可。一般而言，需要学会配置Linux中的相关环境。如果是后者，更需要学会配置Linux本身。可于文档中酌情说明自身的实现思路以及工作量。 |
| 个人信息维护       | 4    | 在个人中心页面中维护个人信息。各个字段应合理，密码中出现生日时应提醒。 |
| 语言大师           | 4    | **支持至少三种语言：（3分）**<br/>设置语言后所有静态页面信息均使用相应语言显示（艺术品信息等动态数据可不遵循此规定），直至下一次切换，而无需在每个页面手动设置。切换按钮可放置于任何合理位置。<br />实现时禁止为每种语言重写一个新的页面或大篇幅复制黏贴<br />**进阶二选一：（1分）**<br />a. 支持从右向左书写的语言，页面布局也应有相应变化<br />b. 部分语言考虑性数变化（不要求所有语法/拼写完全正确，实现功能即可， 例：`zh-CN`: 1只兔子, `en-US`: 1 rabbit; `zh-CN`: 5只兔子, `en-US`: 5 rabbit**s**） |
| 用户画像（*）      | 3    | 根据用户访问量等信息，在首页添加猜你喜欢功能，向用户主动推荐品项。 |
| 信息安全（*）      | 3    | **（如有意愿完成此项请先联系助教）**预防XSS/CSRF攻击         |
| BGM                | 2    | 给你的网站加个背景音乐                                       |
| 商品图片局部放大   | 3    | 可自行参考淘宝等购物平台                                     |
| 点赞               | 3    | 显示一条评论的点赞次数，显示本用户是否点赞过，且可取消。     |
| 点击过快（*）      | 2    | 注册或登录失败时，不应点击按钮过快。检测到此用户行为时应给出相应提示并拒绝用户操作。可取任意合理阈值。 |
| 访问量             | 2    | 展示艺术品详细信息时应多展示访问量一项                       |
| 高级SQL（*）       | 2    | 应用trigger或function或view，需要自行学习SQL相关知识。~~也许了解一下会节约你花在以上某些功能的时间呢~~ |
| 其他页面           | 1    | url不存在时应有等待页面/异常页面                             |
| lighthouse（**）   | 4    | “无障碍”一项的分数÷25，详见下文                              |
| 页面美观程度       | 3    | 平均2分 按照正态                                             |
| ~~减少助教工作量~~ | 2    | 提前两周完成pj并参加面试                                     |

（*）的项需提交一篇小文档，说明其实现原理即可。**不要卷！！！说人话！！！**

（**）Lighthouse为Edge浏览器分析页面质量的工具。在Edge浏览器中，按下F12之后，在向右双箭头“更多选项卡”中可以找到。实际评分时，助教会选择如下选项进行评分：

![lighthouse](pic\lighthouse.png)



评分细则主要包含一些基本的标签有无**无障碍属性**（例如`img`的`alt`），还有**颜色搭配**的对比度等。**实际得分为`ceil(score / 25.0) `**。也就是说，**75分及以上的无障碍分数在本次项目中会视作满分**。然而，仍然鼓励大家拿高分，为人人皆能使用的，平等博爱内容丰富的互联网做出自己的第一份贡献。

## 文档

格式**建议为pdf**。

### DON'Ts

**不能写得太长。**这不是论文！为了减轻大家的负担，请大家酌情阐述。不要有太多表达同一个意思的多句话！

**不用包含太多的截图。**网页是动态的、多样的，每个同学的操作逻辑、网页构建都不一样！所有的网页样式，以助教检查的时候为准。然而，对于一些必须的项目或者认为**无截图则难以阐明自己的工作量的项目可放置截图**。（例如：把自己的电脑变成服务器而不选择去租一台服务器，自己电脑中LAMP或LNMP各种配置的截图）

总之，助教们不希望检查时感觉到**“这个人在卷文档而网页却没有什么实质性的内容”**



最后，请大家合理安排时间，建议在期中检查前至少完成页面设计，并尽早联通后端和数据库，也不要~~像某助教去年一样那么肝orz~~在ddl前一个礼拜才开始赶PJ的主体业务功能。希望大家能通过此次PJ有所收获。
